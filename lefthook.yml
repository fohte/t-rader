remotes:
  - git_url: https://github.com/fohte/lefthook-config.git
    ref: v0.1.15 # renovate: datasource=github-tags depName=fohte/lefthook-config
    configs:
      - base.yml
      - rust.yml

pre-commit:
  commands:
    dump-openapi:
      priority: 1
      glob: '*.rs'
      root: 'backend/'
      run: cargo run -- --dump-openapi > openapi.json.tmp && mv openapi.json.tmp openapi.json && git add openapi.json
    openapi-typescript:
      priority: 2
      glob: '*.rs'
      root: 'frontend/'
      run: bun run generate:api && git add src/lib/api/schema.gen.d.ts
    ast-grep:
      glob: '*.rs'
      run: ast-grep scan {staged_files}
    cargo-fmt:
      root: 'backend/'
    cargo-clippy:
      root: 'backend/'
